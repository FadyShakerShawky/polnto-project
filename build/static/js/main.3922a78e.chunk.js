(this["webpackJsonppolotno-studio"]=this["webpackJsonppolotno-studio"]||[]).push([[0],{231:function(e,t,n){},412:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(27),i=n.n(a),c=n(154),s=n.n(c),l=(n(231),n(118)),d=n(210),u=n.n(d),j=n(218),p=n.n(j),f=n(152),h=n.n(f),b=n(220),m=n.n(b),g=n(83),O=n(26),v=n(208),x=n(89),w=n(151),y=n.n(w),S=n(153),T=n(22),k=Object(O.observer)((function(e){var t=e.store,n=r.a.useRef(),o=r.a.useState(!1),a=Object(g.a)(o,2);a[0],a[1];return Object(T.jsxs)(v.Z,{children:[Object(T.jsxs)(v.Z.Group,{align:x.a.LEFT,children:[Object(T.jsx)(v.g,{icon:"new-object",minimal:!0,onClick:function(){var e=t.pages.map((function(e){return e.children.map((function(e){return e.id}))})).flat();if(!(null===e||void 0===e?void 0:e.length)||window.confirm("Remove all content for a new design?")){var n=t.pages.map((function(e){return e.id}));t.deletePages(n),t.addPage()}},children:"New"}),Object(T.jsxs)("label",{htmlFor:"load-project",children:[Object(T.jsx)(v.g,{icon:"folder-open",minimal:!0,onClick:function(){document.querySelector("#load-project").click()},children:"Open"}),Object(T.jsx)("input",{type:"file",id:"load-project",accept:".json,.polotno",ref:n,style:{width:"180px",display:"none"},onChange:function(e){var n=e.target;if(n.files.length){var o=new FileReader;o.onloadend=function(){var n,r=o.result;try{n=JSON.parse(r)}catch(e){alert("Can not load the project.")}n&&t.loadJSON(n)},o.onerror=function(){alert("Can not load the project.")},o.readAsText(n.files[0])}}})]}),Object(T.jsx)(v.g,{icon:"floppy-disk",minimal:!0,onClick:function(){var e=t.toJSON(),n="data:text/json;base64,"+window.btoa(unescape(encodeURIComponent(JSON.stringify(e))));Object(S.downloadFile)(n,"polotno.json")},children:"Save"})]}),Object(T.jsxs)(v.Z.Group,{align:x.a.RIGHT,children:[Object(T.jsx)(v.t,{}),Object(T.jsx)(y.a,{store:t}),Object(T.jsx)(v.cb,{children:"White board stadio"})]})]})})),C=function(e,t){var n=new FileReader;n.onloadend=function(){var e,o=n.result;try{e=JSON.parse(o)}catch(r){alert("Can not load the project.")}e&&t.loadJSON(e)},n.onerror=function(){alert("Can not Polotno project file.")},n.readAsText(e)},N=n(82),P=n(84),I=n(31),J=n.n(I),E=n(93),F=n(60),A=n(48),R=n(117),D=n.n(R),z={name:"Custome templetes",Tab:function(e){return Object(T.jsx)(N.SectionTab,Object(P.a)(Object(P.a)({name:"Custome templetes"},e),{},{children:Object(T.jsx)(D.a,{})}))},Panel:Object(O.observer)((function(e){var t,n=e.store,o=Object(F.useSWRInfinite)((function(e){return"templates/page".concat(e+1,".json")})),r=o.data,a=o.error,i=(o.mutate,o.size),c=o.setSize,s=!r&&!a||!!(i>0&&r&&"undefined"===typeof r[i-1]),l=0===(null===r||void 0===r||null===(t=r[0])||void 0===t?void 0:t.length)||r&&r[0].total_pages===i;return Object(T.jsx)("div",{style:{height:"100%"},children:Object(T.jsx)(A.ImagesGrid,{shadowEnabled:!1,images:null===r||void 0===r?void 0:r.map((function(e){return e.items})).flat(),getPreview:function(e){return"/templates/".concat(e.preview)},isLoading:s,onSelect:function(){var e=Object(E.a)(J.a.mark((function e(t){var o,r;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/templates/".concat(t.json));case 2:return o=e.sent,e.next=5,o.json();case 5:r=e.sent,n.loadJSON(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),loadMore:function(){l||c(i+1)},rowsNumber:1})})}))},G=n(88),H=[z,{name:"custome photos",Tab:function(e){return Object(T.jsx)(N.SectionTab,Object(P.a)(Object(P.a)({name:"custome Photos"},e),{},{children:Object(T.jsx)(D.a,{})}))},Panel:Object(O.observer)((function(e){var t=e.store,n=r.a.useState([]),o=Object(g.a)(n,2),a=o[0],i=o[1];function c(){return s.apply(this,arguments)}function s(){return(s=Object(E.a)(J.a.mark((function e(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i([]),e.next=3,new Promise((function(e){return setTimeout(e,3e3)}));case 3:i([{url:"./images/carlos-lindner-zvZ-HASOA74-unsplash.jpg"},{url:"./images/guillaume-de-germain-TQWJ4rQnUHQ-unsplash.jpg"}]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){c()}),[]),Object(T.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(T.jsx)(v.R,{leftIcon:"search",placeholder:"Search...",onChange:function(e){c()},style:{marginBottom:"20px"}}),Object(T.jsx)("p",{children:"Demo images: "}),Object(T.jsx)(A.ImagesGrid,{images:a,getPreview:function(e){return e.url},onSelect:function(){var e=Object(E.a)(J.a.mark((function e(n){var o,r,a;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.getImageSize)(n.url);case 2:o=e.sent,r=o.width,a=o.height,t.activePage.addElement({type:"image",src:n.url,width:r,height:a});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rowsNumber:2,isLoading:!a.length,loadMore:!1})]})}))}].concat(Object(l.a)(N.DEFAULT_SECTIONS)),L=function(e){var t=e.store;return console.log(t),Object(T.jsxs)("div",{style:{width:"100vw",height:"100vh"},onDrop:function(e){if(e.preventDefault(),e.dataTransfer.items){for(var n=0;n<e.dataTransfer.items.length;n++)if("file"===e.dataTransfer.items[n].kind){var o=e.dataTransfer.items[n].getAsFile();C(o,t)}}else for(var r=0;r<e.dataTransfer.files.length;r++)C(e.dataTransfer.files[r],t)},children:[Object(T.jsx)(k,{store:t}),Object(T.jsxs)("div",{style:{display:"flex",height:"calc(100% - 50px)",width:"100%",backgroundColor:"#30404d"},children:[Object(T.jsx)("div",{style:{width:"400px",height:"100%",display:"flex"},children:Object(T.jsx)(h.a,{store:t,sections:H,defaultSection:"templates"})}),Object(T.jsxs)("div",{style:{display:"flex",height:"100%",margin:"auto",flex:1,flexDirection:"column",position:"relative"},children:[Object(T.jsx)(u.a,{store:t}),Object(T.jsx)(m.a,{store:t}),Object(T.jsx)(p.a,{store:t})]})]})]})},W=n(221);window.innerWidth<650&&(document.getElementById("__viewport").setAttribute("content","width=device-width, height=device-height, initial-scale=0.5"),alert("Hey, looks like you opened the app from the mobile. Polotno Studio is not optimized for mobile yet. But thanks for your interest! We will have mobile support soon. For now, please use it on the desktop."));var B=Object(W.createStore)({key:"nFA5H9elEytDyPyvKL7T"});window.store=B,s.a.getItem("polotno-state",(function(e,t){t&&B.loadJSON(t),B.pages.length||B.addPage()})),B.on("change",(function(){try{var e=B.toJSON();s.a.setItem("polotno-state",e)}catch(t){}})),i.a.render(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(L,{store:B})}),document.getElementById("root"))}},[[412,1,2]]]);
//# sourceMappingURL=main.3922a78e.chunk.js.map